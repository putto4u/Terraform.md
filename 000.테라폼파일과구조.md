ν…λΌνΌ ν”„λ΅μ νΈλ¥Ό κµ¬μ„±ν•  λ• μΌκ΄€λκ³  μ²΄κ³„μ μΈ **λ””λ ‰ν† λ¦¬ κµ¬μ΅°**λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ€ κ΄€λ¦¬κ°€ μ©μ΄ν•κ³  μ¬μ‚¬μ©μ„±μ„ λ†’μ΄λ” λ° λ§¤μ° μ¤‘μ”ν•©λ‹λ‹¤.

## π“ ν‘μ¤€ Terraform λ””λ ‰ν† λ¦¬ κµ¬μ΅° (λ¨λ²” μ‚¬λ΅€)

IT μ „λ¬Έκ°€λ΅μ„ μ¶”μ²ν•λ” μΌλ°μ μΈ ν”„λ΅μ νΈ κµ¬μ΅°λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤. μ΄ κµ¬μ΅°λ” κ·λ¨κ°€ μ»¤μ§μ— λ”°λΌ λ¨λ“ν™”(Modules)λ¥Ό μ μ©ν•κΈ° μ‰½κ³ , ν™κ²½λ³„(Environments) λ¶„λ¦¬λ¥Ό λ…ν™•ν•κ² ν•©λ‹λ‹¤.

### 1\. λ£¨νΈ λ””λ ‰ν† λ¦¬ (Root Directory)

ν”„λ΅μ νΈμ μµμƒμ„ λ””λ ‰ν† λ¦¬μ…λ‹λ‹¤. μ—¬κΈ°μ— ν™κ²½λ³„ κµ¬μ„±μ„ μ„ν• νμΌκ³Ό λ¨λ“μ„ ν¬ν•¨ν•©λ‹λ‹¤.

| νμΌ/λ””λ ‰ν† λ¦¬ | λ©μ  | μ„¤λ… |
| :--- | :--- | :--- |
| **`main.tf`** | **ν•µμ‹¬ λ΅μ§** | ν”„λ΅λ°”μ΄λ”(Provider) μ„¤μ •, λ¦¬μ†μ¤ μ •μ, λ¨λ“ νΈμ¶ λ“± μ£Όλ μΈν”„λΌ μ •μ. |
| **`variables.tf`** | **μ…λ ¥ λ³€μ** | μ‚¬μ©μκ°€ μ£Όμ…ν•  λ¨λ“  λ³€μ (`variable` λΈ”λ΅)λ¥Ό μ •μν•©λ‹λ‹¤. |
| **`outputs.tf`** | **μ¶λ ¥ κ°’** | μƒμ„±λ λ¦¬μ†μ¤μ μ¤‘μ”ν• μ†μ„±(IP μ£Όμ†, μ—”λ“ν¬μΈνΈ λ“±)μ„ μ¶λ ¥ν•©λ‹λ‹¤. |
| **`terraform.tfvars`** | **λ³€μ κ°’** | `variables.tf`μ— μ •μλ λ³€μλ“¤μ— μ‹¤μ  κ°’μ„ ν• λ‹Ήν•©λ‹λ‹¤. (λ³΄μ•μƒ μ¤‘μ”ν• κ°’μ€ μ μ™Έ) |
| **`versions.tf`** | **λ²„μ „ μ μ•½** | Terraform μ½”μ–΄ λ²„μ „κ³Ό μ‚¬μ©ν•λ” ν”„λ΅λ°”μ΄λ”μ λ²„μ „μ„ λ…μ‹ν•©λ‹λ‹¤. |
| **`.terraform/`** | (μλ™ μƒμ„±) | λ‹¤μ΄λ΅λ“λ ν”„λ΅λ°”μ΄λ” ν”λ¬κ·ΈμΈ, λ¨λ“, μ΄κΈ°ν™” μƒνƒ νμΌ(λ΅μ»¬ λ°±μ—”λ“ μ‚¬μ© μ‹) λ“±μ΄ μ €μ¥λ©λ‹λ‹¤. **Git μ¶”μ μ—μ„ μ μ™Έ**ν•΄μ•Ό ν•©λ‹λ‹¤. |
| **`modules/`** | **λ¨λ“ν™”λ μ½”λ“** | μ¬μ‚¬μ© κ°€λ¥ν• μΈν”„λΌ μ»΄ν¬λ„νΈ(μ: VPC, EC2 μΈμ¤ν„΄μ¤, S3 λ²„ν‚·)λ¥Ό λ¶„λ¦¬ν•μ—¬ μ €μ¥ν•λ” λ””λ ‰ν† λ¦¬. |
| **`environments/`** | **ν™κ²½λ³„ κµ¬μ„±** | κ°λ°(dev), μ¤ν…μ΄μ§•(stage), μ΄μ(prod) λ“± ν™κ²½λ³„λ΅ μΈν”„λΌλ¥Ό λ¶„λ¦¬ κ΄€λ¦¬ν•λ” λ””λ ‰ν† λ¦¬. |

-----

### 2\. `modules/` λ””λ ‰ν† λ¦¬ (μ¬μ‚¬μ© κ°€λ¥ν• μ»΄ν¬λ„νΈ)

`modules/` λ””λ ‰ν† λ¦¬λ” λ³µμ΅ν• μΈν”„λΌλ¥Ό μ¶”μƒν™”ν•κ³  μ¬μ‚¬μ©μ„±μ„ κ·Ήλ€ν™”ν•κΈ° μ„ν•΄ μ‚¬μ©ν•©λ‹λ‹¤. κ° λ¨λ“μ€ λ…λ¦½μ μΈ ν…λΌνΌ κµ¬μ„± νμΌ μ…‹μ„ κ°€μ§‘λ‹λ‹¤.

```
modules/
β”β”€β”€ vpc/
β”‚   β”β”€β”€ main.tf        # VPC μƒμ„± λ΅μ§ (λ„¤νΈμ›ν¬ μ£Όμ†, μ„λΈλ„· λ“±)
β”‚   β”β”€β”€ variables.tf   # VPC λ¨λ“μ μ…λ ¥ λ³€μ (CIDR λ“±)
β”‚   β””β”€β”€ outputs.tf     # μƒμ„±λ VPC ID, μ„λΈλ„· ID λ“± μ¶λ ¥
β”β”€β”€ ec2-instance/
β”‚   β”β”€β”€ main.tf        # EC2 μΈμ¤ν„΄μ¤ μƒμ„± λ΅μ§
β”‚   β””β”€β”€ variables.tf
β””β”€β”€ rds-database/
    β””β”€β”€ ...
```

λ£¨νΈ λ””λ ‰ν† λ¦¬μ `main.tf`μ—μ„λ” μ΄ λ¨λ“λ“¤μ„ **`source`** μ†μ„±μ„ μ‚¬μ©ν•μ—¬ νΈμ¶ν•©λ‹λ‹¤.

```terraform
module "main_vpc" {
  source = "./modules/vpc"
  # ... λ³€μ μ „λ‹¬
}
```

-----

### 3\. `environments/` λ””λ ‰ν† λ¦¬ (ν™κ²½λ³„ λ¶„λ¦¬)

`environments/` λ””λ ‰ν† λ¦¬λ” λ™μΌν• μΈν”„λΌ κµ¬μ„±μ„ **λ‹¤μ–‘ν• λ°°ν¬ ν™κ²½**μ— μ μ©ν•  λ• μ‚¬μ©λ©λ‹λ‹¤. κ° ν™κ²½μ€ μ£Όλ΅ **λ°±μ—”λ“(Backend)** μ„¤μ •κ³Ό **λ³€μ νμΌ**μ΄ λ‹¤λ¦…λ‹λ‹¤.

```
environments/
β”β”€β”€ dev/
β”‚   β”β”€β”€ main.tf        # (μµμ…) dev ν™κ²½μ— νΉν™”λ λ¦¬μ†μ¤ μ •μ
β”‚   β”β”€β”€ backend.tf     # dev ν™κ²½μ μƒνƒ νμΌ μ €μ¥μ† (S3, Azure Storage λ“±) μ„¤μ •
β”‚   β””β”€β”€ terraform.tfvars  # dev ν™κ²½ λ³€μ κ°’ (instance_count = 1 λ“±)
β”β”€β”€ prod/
β”‚   β”β”€β”€ backend.tf     # prod ν™κ²½μ μƒνƒ νμΌ μ €μ¥μ† μ„¤μ •
β”‚   β””β”€β”€ terraform.tfvars  # prod ν™κ²½ λ³€μ κ°’ (instance_count = 3 λ“±)
β””β”€β”€ stage/
    β””β”€β”€ ...
```

μ΄ κµ¬μ΅°μ—μ„λ” `main.tf`μ™€ `outputs.tf`μ™€ κ°™μ€ **κ³µν†µ λ΅μ§**μ€ **λ£¨νΈ λ””λ ‰ν† λ¦¬**μ— λ‘κ³ , `environments` ν΄λ” λ‚΄μ—μ„λ” \*\*ν™κ²½μ— νΉν™”λ μ„¤μ •(λ³€μ, λ°±μ—”λ“)\*\*λ§ κ΄€λ¦¬ν•λ” κ²ƒμ΄ μΌλ°μ μ…λ‹λ‹¤.

> **μ‹¤μ „ ν:** μ‹¤μ  `terraform init` λ° `terraform apply` λ…λ Ήμ€ **`environments/dev`** λλ” **`environments/prod`** λ””λ ‰ν† λ¦¬ λ‚΄μ—μ„ μ‹¤ν–‰ν•΄μ•Ό, ν•΄λ‹Ή ν™κ²½μ `backend.tf`λ¥Ό μ‚¬μ©ν•μ—¬ μƒνƒ νμΌμ΄ ν™κ²½λ³„λ΅ λ¶„λ¦¬λμ–΄ κ΄€λ¦¬λ©λ‹λ‹¤.
